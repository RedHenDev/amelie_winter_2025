<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Movie Selector</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background: black;
            color: white;
            font-family: 'Segoe UI', Arial, sans-serif;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }

        #container {
            position: relative;
            z-index: 10;
            text-align: center;
            max-width: 90%;
        }

        h1 {
            font-size: clamp(1.5rem, 5vw, 3rem);
            margin-bottom: 1rem;
            text-shadow: 0 0 10px #fff;
        }

        p {
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            padding: 0 1rem;
        }

        #movie-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.75rem;
            margin: 1rem auto;
            max-width: 1200px;
            max-height: 50vh;
            overflow-y: auto;
            padding: 1rem;
            background: rgba(0,0,0,0.5);
            border-radius: 20px;
        }

        @media (max-width: 768px) {
            #movie-list {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 0.5rem;
                padding: 0.75rem;
                max-height: 45vh;
            }
        }

        .movie-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 0.75rem;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
            border: 2px solid transparent;
            font-size: clamp(0.85rem, 2vw, 1rem);
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .movie-card.selected {
            border-color: #0f0;
            background: rgba(0, 255, 0, 0.2);
            box-shadow: 0 0 20px #0f0;
        }

        @media (hover: hover) {
            .movie-card:hover {
                transform: scale(1.05);
                background: rgba(255, 255, 255, 0.2);
            }
        }

        @media (hover: none) {
            .movie-card:active {
                background: rgba(255, 255, 255, 0.2);
            }
        }

        button {
            background: #c00;
            color: white;
            border: none;
            padding: clamp(0.75rem, 2vw, 1rem) clamp(1.5rem, 4vw, 2rem);
            font-size: clamp(1.1rem, 3vw, 1.5rem);
            border-radius: 50px;
            cursor: pointer;
            margin: 1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            transition: all 0.3s;
            width: auto;
            max-width: 90%;
        }

        @media (hover: hover) {
            button:hover {
                background: #f00;
                transform: translateY(-3px);
            }

            .movie-card:hover {
                transform: scale(1.05);
                background: rgba(255, 255, 255, 0.2);
            }
        }

        @media (hover: none) {
            button:active {
                background: #f00;
            }

            .movie-card:active {
                background: rgba(255, 255, 255, 0.2);
            }
        }

        button:disabled {
            background: #666;
            cursor: not-allowed;
        }

        #reveal-stage {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 100vw;
            text-align: center;
            z-index: 100;
        }

        #movie-title {
            font-size: clamp(2rem, 10vw, 8rem);
            font-weight: bold;
            color: #ff0000;
            text-shadow: 
                0 0 20px #ff0000,
                0 0 40px #ff3333,
                0 0 60px #ff6666,
                0 0 80px #ff9999,
                0 0 100px #ffcccc,
                0 0 120px #ffffff;
            animation: sparkle 1.8s infinite alternate;
            margin: 0 1rem;
            line-height: 1.2;
            position: relative;
            pointer-events: none;
            padding: 0 1rem;
            word-wrap: break-word;
            max-width: 90vw;
        }

        #snow-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: all;
            z-index: 101;
        }

        .snowflake-particle {
            position: absolute;
            color: white;
            font-size: clamp(16px, 3vw, 24px);
            pointer-events: none;
            animation: snowflake-fall 1s ease-out forwards;
        }

        @keyframes snowflake-fall {
            0% {
                transform: translate(0, 0) rotate(0deg) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) rotate(720deg) scale(0);
                opacity: 0;
            }
        }

        @keyframes sparkle {
            0% {
                text-shadow: 
                    0 0 20px #ff0000,
                    0 0 40px #ff3333,
                    0 0 60px #ff6666,
                    0 0 80px #ff9999,
                    0 0 100px #ffcccc;
            }
            100% {
                text-shadow: 
                    0 0 30px #ff3333,
                    0 0 50px #ff0000,
                    0 0 80px #ff6666,
                    0 0 100px #ffaaaa,
                    0 0 130px #ffdddd,
                    0 0 150px #ffffff;
            }
        }

        #reveal-message {
            font-size: clamp(1.2rem, 4vw, 2.5rem);
            margin-top: 2rem;
            margin-bottom: 1rem;
            opacity: 0.9;
            padding: 0 1rem;
        }
    </style>
</head>
<body>
    <canvas id="bg-canvas"></canvas>

    <div id="container">
        <h1>Christmas Movie Night Selector</h1>
        <p>Select your "maybe pile" â€” the movies you're happy to watch tonight! (At least 2)</p>

        <div id="movie-list"></div>

        <button id="choose-btn" disabled>Choose Our Movie! ðŸŽ„</button>
    </div>

    <div id="reveal-stage">
        <div id="reveal-message">Tonight's movie is...</div>
        <div id="movie-title"></div>
        <canvas id="snow-overlay"></canvas>
    </div>

    <script>
        // Family-friendly Christmas movies (updated for 2025)
        const movies = [
            "Home Alone",
            "Home Alone 2: Lost in New York",
            "The Polar Express",
            "Elf",
            "The Grinch (2018)",
            "How the Grinch Stole Christmas (1966)",
            "A Christmas Story",
            "It's a Wonderful Life",
            "Miracle on 34th Street (1947)",
            "Miracle on 34th Street (1994)",
            "National Lampoon's Christmas Vacation",
            "The Muppet Christmas Carol",
            "Arthur Christmas",
            "The Santa Clause",
            "The Santa Clause 2",
            "Frosty the Snowman",
            "Rudolph the Red-Nosed Reindeer",
            "Mickey's Once Upon a Christmas",
            "Mickey's Twice Upon a Christmas",
            "Noelle",
            "The Nightmare Before Christmas",
            "Beauty and the Beast: The Enchanted Christmas",
            "Klaus",
            "The Christmas Chronicles",
            "The Christmas Chronicles: Part Two",
            "Jingle Jangle: A Christmas Journey",
            "That Christmas",
            "Diary of a Wimpy Kid: The Last Straw",
            "A Very Jonas Christmas Movie",
            "The Claus Family",
            "The Princess Switch",
            "A Boy Called Christmas",
            "Robin Robin",
            "The Boy, the Mole, the Fox and the Horse",
            "Stick Man",
            "Scrooged",
            "Ernest Saves Christmas",
            "Snow Day"
        ];

        const movieList = document.getElementById('movie-list');
        const chooseBtn = document.getElementById('choose-btn');
        const container = document.getElementById('container');
        const revealStage = document.getElementById('reveal-stage');
        const movieTitle = document.getElementById('movie-title');
        const bgCanvas = document.getElementById('bg-canvas');

        let selectedMovies = [];

        // Create movie cards (alphabetical)
        movies.sort().forEach(movie => {
            const card = document.createElement('div');
            card.className = 'movie-card';
            card.textContent = movie;
            card.addEventListener('click', () => {
                card.classList.toggle('selected');
                if (card.classList.contains('selected')) {
                    selectedMovies.push(movie);
                } else {
                    selectedMovies = selectedMovies.filter(m => m !== movie);
                }
                chooseBtn.disabled = selectedMovies.length < 2;
            });
            movieList.appendChild(card);
        });

        // Choose button - now instantly reveals the random selection
        chooseBtn.addEventListener('click', () => {
            if (selectedMovies.length < 2) return;

            // Randomly select one movie
            const finalMovie = selectedMovies[Math.floor(Math.random() * selectedMovies.length)];

            // Show the reveal instantly
            movieTitle.textContent = finalMovie;
            container.style.display = 'none';
            revealStage.style.display = 'flex';
            
            // Initialize snow overlay
            initSnowOverlay();
        });

        // Beautiful starry background with twinkling stars and shooting stars
        const bgCtx = bgCanvas.getContext('2d');
        bgCanvas.width = window.innerWidth;
        bgCanvas.height = window.innerHeight;

        const stars = [];
        for (let i = 0; i < 300; i++) {
            stars.push({
                x: Math.random() * bgCanvas.width,
                y: Math.random() * bgCanvas.height,
                radius: Math.random() * 2 + 0.5,
                speed: Math.random() * 0.3 + 0.05,
                twinkle: Math.random() * Math.PI * 2
            });
        }

        let shootingStars = [];
        function createShootingStar() {
            shootingStars.push({
                x: Math.random() * bgCanvas.width,
                y: -50,
                length: Math.random() * 120 + 80,
                speed: Math.random() * 15 + 10,
                opacity: 1
            });
        }

        setInterval(createShootingStar, Math.random() * 5000 + 3000);

        function animateBackground() {
            bgCtx.fillStyle = 'rgba(0,0,0,0.1)';
            bgCtx.fillRect(0, 0, bgCanvas.width, bgCanvas.height);

            stars.forEach(star => {
                star.twinkle += 0.04;
                const opacity = (Math.sin(star.twinkle) + 1) / 2 * 0.8 + 0.2;
                bgCtx.fillStyle = `rgba(255,255,255,${opacity})`;
                bgCtx.beginPath();
                bgCtx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                bgCtx.fill();

                star.y += star.speed;
                if (star.y > bgCanvas.height) star.y = -10;
            });

            shootingStars = shootingStars.filter(ss => {
                ss.y += ss.speed;
                ss.x += ss.speed * 0.4;
                ss.opacity -= 0.02;

                bgCtx.strokeStyle = `rgba(255,255,255,${ss.opacity})`;
                bgCtx.lineWidth = 3;
                bgCtx.beginPath();
                bgCtx.moveTo(ss.x, ss.y);
                bgCtx.lineTo(ss.x - ss.length, ss.y - ss.length / 3);
                bgCtx.stroke();

                return ss.opacity > 0 && ss.y < bgCanvas.height + 100;
            });

            requestAnimationFrame(animateBackground);
        }
        animateBackground();

        // Resize handling
        window.addEventListener('resize', () => {
            bgCanvas.width = window.innerWidth;
            bgCanvas.height = window.innerHeight;
        });

        // Snow overlay effect
        function initSnowOverlay() {
            const snowCanvas = document.getElementById('snow-overlay');
            const ctx = snowCanvas.getContext('2d');
            snowCanvas.width = window.innerWidth;
            snowCanvas.height = window.innerHeight;

            // Create snow particles covering the screen
            const snowParticles = [];
            const particleCount = 8000;
            
            for (let i = 0; i < particleCount; i++) {
                snowParticles.push({
                    x: Math.random() * snowCanvas.width,
                    y: Math.random() * snowCanvas.height,
                    radius: Math.random() * 2.5 + 1,
                    opacity: Math.random() * 0.6 + 0.4
                });
            }

            function drawSnow() {
                ctx.clearRect(0, 0, snowCanvas.width, snowCanvas.height);
                snowParticles.forEach(p => {
                    ctx.fillStyle = `rgba(255, 255, 255, ${p.opacity})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                    ctx.fill();
                });
            }

            drawSnow();

            // Click/tap to blast snow away
            snowCanvas.addEventListener('click', (e) => {
                const rect = snowCanvas.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const clickY = e.clientY - rect.top;
                const blastRadius = 80;

                // Remove snow particles in blast radius
                for (let i = snowParticles.length - 1; i >= 0; i--) {
                    const p = snowParticles[i];
                    const dx = p.x - clickX;
                    const dy = p.y - clickY;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < blastRadius) {
                        // Create flying snowflake particles
                        createSnowflakeExplosion(clickX, clickY, p.x, p.y);
                        snowParticles.splice(i, 1);
                    }
                }

                drawSnow();
            });

            // Touch support for mobile
            snowCanvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                const rect = snowCanvas.getBoundingClientRect();
                const clickX = touch.clientX - rect.left;
                const clickY = touch.clientY - rect.top;
                const blastRadius = 80;

                for (let i = snowParticles.length - 1; i >= 0; i--) {
                    const p = snowParticles[i];
                    const dx = p.x - clickX;
                    const dy = p.y - clickY;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < blastRadius) {
                        createSnowflakeExplosion(clickX, clickY, p.x, p.y);
                        snowParticles.splice(i, 1);
                    }
                }

                drawSnow();
            });
        }

        function createSnowflakeExplosion(centerX, centerY, particleX, particleY) {
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake-particle';
            snowflake.textContent = 'â„';
            snowflake.style.left = particleX + 'px';
            snowflake.style.top = particleY + 'px';
            
            const angle = Math.atan2(particleY - centerY, particleX - centerX);
            const distance = 150 + Math.random() * 100;
            const tx = Math.cos(angle) * distance;
            const ty = Math.sin(angle) * distance;
            
            snowflake.style.setProperty('--tx', tx + 'px');
            snowflake.style.setProperty('--ty', ty + 'px');
            
            document.body.appendChild(snowflake);
            
            setTimeout(() => snowflake.remove(), 1000);
        }
    </script>
</body>
</html>